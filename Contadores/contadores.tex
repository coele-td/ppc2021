% Contatador genérico de horas presenciais para comandos

\newcounter{horasAT}	% Contador das horas presenciais do curso
\setcounter{horasAT}{0} % O Contador deve ser zerado

\newcounter{horasAP}	% Contador das horas presenciais do curso
\setcounter{horasAP}{0} % O Contador deve ser zerado

\newcounter{horasP}	% Contador das horas presenciais do curso
\setcounter{horasP}{0} % O Contador deve ser zerado

\newcounter{horasANP}	% Contador das horas não-presenciais do curso
\setcounter{horasANP}{0} % O Contador deve ser zerado

\newcounter{horasOPT}	% Contador das horas de optativas
\setcounter{horasOPT}{0} % O Contador deve ser zerado

\newcounter{horasOBG}	% Contador das horas de obrigatórias
\setcounter{horasOBG}{0} % O Contador deve ser zerado

\newcounter{horasT}	% Contador das horas totais do curso
\setcounter{horasT}{0} % O Contador deve ser zerado

\newcounter{horasEXT}	% Contador das horas extensionistas do curso
\setcounter{horasEXT}{0} % O Contador deve ser zerado

\newcounter{horasB}	% Contador das horas do núcleo básico do curso
\setcounter{horasB}{0} % O Contador deve ser zerado

\newcounter{horasPR}	% Contador das horas do núcleo Profissionalizante do curso
\setcounter{horasPR}{0} % O Contador deve ser zerado

\newcounter{horasPE}	% Contador das horas do núcleo Profissionalizante Específico do curso
\setcounter{horasPE}{0} % O Contador deve ser zerado

\newcounter{horasH}	% Contador das horas de humanidades do curso
\setcounter{horasH}{0} % O Contador deve ser zerado

\newcounter{horasUCEXT}	% Contador das horas de disciplinas extensionistas 
\setcounter{horasUCEXT}{0} % O Contador deve ser zerado

\newcounter{horasCEXT}	% Contador das horas de atividades complementares de extensão
\setcounter{horasCEXT}{0}  % O Contador deve ser zerado

\newcounter{horasEST}	% Contador das horas de estágio
\setcounter{horasEST}{0}  % O Contador deve ser zerado


% Contador de horas dos períodos

\makeatletter
\newcounter{x}  % Valor do período
\newcounter{y}  % Contador temporário para somar teórica com prática
\setcounter{x}{0}
\@whilenum\value{x}<50\do{%             % Cria 10 contadores de 1 à 10
    \stepcounter{x}

    \newcounter{horasAT\the\value{x}}	% Contador das Atividades teóricas do período
    \setcounter{horasAT\the\value{x}}{0} % O Contador deve ser zerado
    
    \newcounter{horasAP\the\value{x}}	% Contador das Atividades práticas do período
    \setcounter{horasAP\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasP\the\value{x}}	% Contador das Atividades Presenciais do período
    \setcounter{horasP\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasANP\the\value{x}}	% Contador das Atividades Presenciais do período
    \setcounter{horasANP\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasOPT\the\value{x}}	% Contador das Optativas do período
    \setcounter{horasOPT\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasOBG\the\value{x}}	% Contador das Optativas do período
    \setcounter{horasOBG\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasT\the\value{x}}	% Contador das horas totais do período
    \setcounter{horasT\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasEXT\the\value{x}}	% Contador das horas extensionistas do período
    \setcounter{horasEXT\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasB\the\value{x}}	% Contador das horas do núcleo básico do período
    \setcounter{horasB\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasPR\the\value{x}}	% Contador das horas do núcleo Profissionalizante do período
    \setcounter{horasPR\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasPE\the\value{x}}	% Contador das horas do núcleo Profissionalizante Específico do período
    \setcounter{horasPE\the\value{x}}{0} % O Contador deve ser zerado

    \newcounter{horasH\the\value{x}}	% Contador das horas de humanidades do período
    \setcounter{horasH\the\value{x}}{0} % O Contador deve ser zerado

    \csvreader[head to column names, separator=pipe, filter test=\ifnumequal{\periodo}{\the\value{x}}]{Dados/unidadesCurriculares.csv}{} %
    {
        \addtocounter{horasAT\the\value{x}}{\chTeorica}                             % Conta AT do período x
        \addtocounter{horasAP\the\value{x}}{\chPratica}                             % Conta AP do período x
        \setcounter{y}{\chPratica}
        \addtocounter{y}{\chTeorica}
        \addtocounter{horasP\the\value{x}}{\the\value{y}}                 % Atividades presenciais (AT + AP) do período x
        \addtocounter{horasANP\the\value{x}}{\anp}                                  % ANP do período x
        
        \addtocounter{horasT\the\value{x}}{\chtotal}                                % Total do período x
        \addtocounter{horasEXT\the\value{x}}{\ext}                                  % Total de extensão do período x
        \ifcsvstrcmp{\tipo}{B}{\addtocounter{horasB\the\value{x}}{\chtotal}}{}      % Total do núcleo básico do período x
        \ifcsvstrcmp{\tipo}{P}{\addtocounter{horasPR\the\value{x}}{\chtotal}}{}     % Total do núcleo Profissionalizante  do período x
        \ifcsvstrcmp{\tipo}{PE}{\addtocounter{horasPE\the\value{x}}{\chtotal}}{}    % Total do núcleo Profissionalizante Específico do período x
        \ifcsvstrcmp{\opt}{optativa}{\addtocounter{horasOPT\the\value{x}}{\chtotal}}{}    % Total de optativas do período x
        \ifcsvstrcmp{\opt}{obrigatoria}{\addtocounter{horasOBG\the\value{x}}{\chtotal}}{}    % Total de obrigatórias do período x
        \ifcsvstrcmp{\opt}{estagio}{\addtocounter{horasEST}{\chtotal}}{}            % Total de estágio
        \addtocounter{horasH\the\value{x}}{\humanidades}                            % Total de humanidades do período x
    } % Conta as horas do curso

    \ifnum \value{x} < 12 % Para não contar as optativas
        \addtocounter{horasAT}{\value{horasAT\the\value{x}}}                % Total Teórico - AT
        
        \addtocounter{horasAP}{\value{horasAP\the\value{x}}}                % Total Prático - AP
        \addtocounter{horasP}{\value{horasP\the\value{x}}}                  % Total presencial
        \addtocounter{horasANP}{\value{horasANP\the\value{x}}}              % Total não-presencial (ANP)
        \addtocounter{horasT}{\value{horasT\the\value{x}}}                  % Total
        \addtocounter{horasEXT}{\value{horasEXT\the\value{x}}}              % Total extensionista
        \addtocounter{horasB}{\value{horasB\the\value{x}}}                  % Total básico
        \addtocounter{horasPR}{\value{horasPR\the\value{x}}}                % Total Profissionalizante
        \addtocounter{horasPE}{\value{horasPE\the\value{x}}}                % Total Profissionalizante Específico
        \addtocounter{horasH}{\value{horasH\the\value{x}}}                  % Total humanidades       
        \addtocounter{horasOBG}{\value{horasOBG\the\value{x}}}              % Total Obrigatórias
        \addtocounter{horasOPT}{\value{horasOPT\the\value{x}}}              % Total Optativas
        \ifnum \value{x} <11 
            \addtocounter{horasUCEXT}{\value{horasEXT\the\value{x}}}        % Total unidades curriculares extensionistas
            
        \fi
        \ifnum \value{x} =11 
            \addtocounter{horasCEXT}{\value{horasEXT\the\value{x}}}
        \fi


    \fi
}%

\newcounter{horasUC}	% Contador das horas de Unidades Curriculares
\setcounter{horasUC}{\value{horasOBG}} % O Contador iniciado com o total de unidades curriculares obrigatórias
\addtocounter{horasUC}{\value{horasOPT}} % Adicionado o valor da carga horária de optativas 

\makeatother

% Contador de horas de humanidades


\newcounter{horasH:AT}	% Contador das horas de Unidades Curriculares
\setcounter{horasH:AT}{0} % O Contador deve ser zerado
\newcounter{horasH:AP}	% Contador das horas de Unidades Curriculares
\setcounter{horasH:AP}{0} % O Contador deve ser zerado
\newcounter{horasH:ANP}	% Contador das horas de Unidades Curriculares
\setcounter{horasH:ANP}{0} % O Contador deve ser zerado
\newcounter{horasH:T}	% Contador das horas de Unidades Curriculares
\setcounter{horasH:T}{0} % O Contador deve ser zerado
\csvreader[ head to column names,
            separator=pipe, 
            filter expr={test{\ifnumgreater{\humanidades}{0}} and test{\ifnumcomp{\periodo}{<}{12}} }]%
            {Dados/unidadesCurriculares.csv}{}%
    	    {
                \addtocounter{horasH:AT}{\chTeorica}
                \addtocounter{horasH:AP}{\chPratica}
                \addtocounter{horasH:ANP}{\anp}
                \addtocounter{horasH:T}{\chtotal}

            }%

